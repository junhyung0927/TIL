---
description: 단위테스트를 만들어라
---

# item10



앞서 살펴본 챕터에서는 코드를 안전하게 만드는 방법을 살펴보았습니다. 사실 코드를 안전하게 만드는 가장 궁극적인 방법은 다양한 종류의 테스트를 진행하는 것입니다.

이러한 종류의 테스트는 개발자의 관점에서 애플리케이션 내부적으로 올바르게 작동하는 것이 아닌, **사용자의 관점에서 애플리케이션 외부적으로 제대로 작동하는지 확인하는 것이 목표입니다.**

이러한 테스트는 개발자에게 유용하지만 충분하다고 확신할 수 없습니다. 해당 요소가 올바르게 작동한다고 100% 보증할 수 있는지, 또한 개발 시점에서 빠른 피드백을 받기에 무리가 있습니다.

이러한 문제를 해결하기 위해 단위 테스트(unit test)가 필요합니다. 단위 테스트는 개발자가 작성하며, 개발자에게 유용합니다.

단위 테스트는 일반적으로 다음과 같은 내용을 확인합니다.

* 일반적인 유스 케이스(happy path): 요소가 사용될 것이라고 예상되는 일반적인 방법을 테스트
* 일반적인 오류 케이스와 잠재적인 문제: 제대로 동작하지 않을 것이라고 예상되는 일반적인 부분, 과거에 문제가 발생했던 부분등을 테스트
* 에지 케이스(?)와 잘못된 아규먼트: Int의 경우 Int.MAX\_VALUE를 사용하는 경우, nullable의 경우 ‘null’ 또는 ‘null 값으로 채워진 객체’를 사용하는 경우를 테스트

**단위 테스트는 개발자가 만들고 있는 요소가 제대로 동작하는지를 빠르게 피드백**해 주므로 개발하는 동안 큰 도움이 됩니다.

TDD(Test Driven Development)로 접근할 수도 있습니다. TDD는 개발 전에 테스트를 먼저 작성하고, 테스트를 통과시키는 것을 목적으로 하나하나 구현해 나가는 방식입니다.

**장점**

* 테스트가 잘 된 요소는 신뢰할 수 있음
* 테스트가 잘 만들어져 있다면, 리팩터링 하는 것을 두려워하지 않아도 됨. 테스트가 있으므로, 리팩터링했을 때 버그가 생기는지 쉽게 확인할 수 있음. 반면 테스트가 없으면 실수로 오류를 일으킬 수도 있다는 생각에 레거시 코드를 수정하는 것을 두려워하게 됨
* 수동으로 테스트하는 것보단 단위 테스트로 확인하는 것이 속도가 빠름.

**단점**

* 단위 테스트를 만드는 데 시간이 많이 소요됨. 장기적으로 봤을 땐 좋은 단위 테스트는 ‘디버깅 시간’과 ‘버그를 찾는 데 소모되는 시간’을 줄여줌.
* 테스트를 활용할 수 있게 코드를 조정해야 함. 변경의 난이도보다, 이러한 변경을 통해서 훌륭하고 잘 정립된 아키텍처를 사용하는 것이 강제될 수 있음
* 좋은 단위 테스트를 만드는 작업은 학습곡선이 높음. 잘못 만들어진 단위 테스트는 득보다 실이 큼.

효과적인 단위 테스트를 하는 방법을 습득하고, 단위 테스트를 위한 코드를 작성하는 것이 생각보다 어렵습니다. 숙련된 코틀린 개발자가 되려면, **단위 테스트와 관련된 기술을 습득**하고, 중요한 코드라고 할 수 있는 다음과 같은 부분에 대해 단위 테스트하는 방법을 숙지하고 있어야 합니다.

* 복잡한 부분
* 변동 가능성이 큰 부분
* 비즈니스 로직 부분
* 공용 API 부분
* 문제가 자주 발생하는 부분
* 수정해야 하는 프로덕션 버그(프로덕션 환경에서 발생하는 버그)
